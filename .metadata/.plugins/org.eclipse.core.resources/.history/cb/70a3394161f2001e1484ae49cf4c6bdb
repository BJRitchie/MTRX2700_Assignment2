
#ifndef TIMER_HEADER
#define TIMER_HEADER

#include <stdint.h>
#include "stm32f303xc.h"

// Defining the serial port struct, the definition is hidden in the
// c file as no one really needs to know this.
struct _HardwareTimer;
typedef struct _HardwareTimer HardwareTimer;

// make instance for TIM2
extern HardwareTimer TIM2_init;

// enable the clocks for desired peripherals (GPIOA, C and E)
void enable_clocks();

/* function to initialise the timer with callback function at overflow
 * Inputs:
 * - period: desired period between actions in milliseconds
 * - hardware_timer: a struct containing the variables to initialise a timer
 * - *overflow_function: pointer to a function to be run at timer overflow
 *
 * Outputs:
 * - None */
void TIM2_interrupt_init(uint32_t period, HardwareTimer *hardware_timer, void (*overflow_function)(void));

#endif
